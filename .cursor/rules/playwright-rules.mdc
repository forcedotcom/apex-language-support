---
globs: **/e2e-tests/**
alwaysApply: false
---

# Playwright E2E Test Rules

See `.claude/skills/playwright-e2e/` for full skill with references.

## Waiting and Timing

- **Never** `waitForTimeout` — wait for specific page elements
- `page.waitForSelector()` — elements appear
- `expect(locator).toBeVisible()` — visibility
- `page.waitForLoadState()` — page state changes
- **Don't** use `page.waitForResponse()` — doesn't work in desktop/electron
- **Don't** use `networkidle` — not available on desktop/electron
- Use `test.step` to organize sequential tests

## Selectors and Assertions

- Prefer `aria` (`getByRole`) over CSS selectors
- `expect` assertions need clear error messages. Import `expect` from playwright
- Fail early, avoid fallbacks/retries
- Reusable locators belong in `e2e-tests/shared/utils/locators.ts`

## Commands and Shortcuts

- Use `f1` for commands, not meta-shift-P
- Use `Control` for all. **No** `ControlOrMeta`

## Reuse

- Check `e2e-tests/shared/` before creating new utilities or PageObjects
- Check `e2e-tests/pages/` for existing page objects

## Debugging

- Use `locator.innerHTML()` on a known-good locator to get accurate inner locators
- Take screenshots — review in `test-results` folder
- Use emojis infrequently

## References

- https://playwright.dev/docs
